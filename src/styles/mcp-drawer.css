/* ðŸŒŒ MCP Drawer - Observatory Command Center Design
 * CREATOR ROUND 7: Transforming ugly Windows 95 style into cosmic elegance
 * - Opalescent button system with embedded depth
 * - Magical portal handle with breathing animations  
 * - Real-time connection status theater
 * - Tool discovery showcase with cosmic badges
 */

@layer components {
  /* ðŸŒ€ RIGHT-SIDE DRAWER HANDLE - ATTACHED TO DRAWER COLUMN */
  .drawer-toggle {
    position: absolute;
    left: -1.5rem; /* Outside the left edge of drawer column */
    top: 50%;
    transform: translateY(-50%);
    width: 1.5rem;
    height: 12rem; /* Longer handle */
    border-radius: 0.75rem 0 0 0.75rem; /* Rounded on left side (towards chat) */
    cursor: pointer;
    z-index: 1001;
    
    /* High contrast opal handle */
    background: 
      radial-gradient(ellipse at 30% 30%, oklch(90% 0.15 200) 0%, transparent 60%),
      radial-gradient(ellipse at 70% 70%, oklch(85% 0.25 280) 0%, transparent 50%),
      linear-gradient(135deg, oklch(88% 0.2 200), oklch(82% 0.25 280));
    
    /* Strong handle visibility */
    border: 2px solid oklch(70% 0.3 200 / 0.8);
    box-shadow: 
      0 0 20px oklch(70% 0.3 200 / 0.6),
      inset -2px 0 0 oklch(95% 0.1 200),
      inset 2px 0 0 oklch(75% 0.2 280 / 0.4),
      4px 0 16px oklch(50% 0.2 200 / 0.3);
    
    /* No animation when closed */
    
    transition: all 0.3s ease; /* Smooth, no bounce */
  }
  
  .drawer-toggle:hover {
    transform: translateY(-50%) translateX(2px);
    box-shadow: 
      0 0 20px oklch(75% 0.25 280 / 0.6),
      inset -2px 0 0 oklch(98% 0.02 280),
      inset 1px 0 0 oklch(80% 0.1 260 / 0.4),
      4px 0 16px oklch(50% 0.1 280 / 0.3);
    animation: drawerExcited 1.5s ease-in-out infinite;
  }
  
  .drawer-toggle[aria-expanded="true"] {
    transform: translateY(-50%) translateX(4px);
    animation: drawerActive 2s ease-in-out infinite;
    background: 
      linear-gradient(-90deg, oklch(95% 0.08 200) 0%, oklch(92% 0.12 180) 100%),
      linear-gradient(180deg, oklch(88% 0.15 160) 0%, oklch(85% 0.18 140) 100%);
  }

  .drawer-content {
    position: relative; /* Grid column positioning */
    width: 100%; /* Fill the grid column */
    height: 100vh;
    padding: var(--space-lg);
    
    /* Observatory command center background */
    background: 
      linear-gradient(180deg, 
        oklch(94% 0.02 280 / 0.95) 0%,
        oklch(92% 0.03 260 / 0.98) 100%
      );
    
    border-left: 1px solid oklch(85% 0.1 280 / 0.3);
    backdrop-filter: blur(12px);
    
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: oklch(80% 0.1 280 / 0.4) transparent;
    
    /* Hide when closed - grid column will be 0px wide */
    opacity: 0;
    visibility: hidden;
    transition: opacity 400ms ease, visibility 400ms ease;
    
    /* Natural stacking - no z-index needed */
  }

  .drawer-content.open {
    /* Show when open */
    opacity: 1;
    visibility: visible;
    
    /* Grid handles the reveal - add shadow for depth */
    box-shadow: 
      -2rem 0 4rem oklch(75% 0.2 280 / 0.2), /* Left shadow for right drawer */
      -1rem 0 2rem oklch(85% 0.15 260 / 0.3);
  }
  
  /* ðŸŽ­ DRAWER HANDLE ANIMATIONS */
  @keyframes drawerBreathing {
    0%, 100% { 
      box-shadow: 
        0 0 16px oklch(75% 0.2 280 / 0.4),
        inset -2px 0 0 oklch(98% 0.02 280),
        inset 1px 0 0 oklch(80% 0.1 260 / 0.3),
        2px 0 12px oklch(50% 0.1 280 / 0.2);
    }
    50% { 
      box-shadow: 
        0 0 24px oklch(75% 0.25 280 / 0.5),
        inset -2px 0 0 oklch(98% 0.02 280),
        inset 1px 0 0 oklch(80% 0.1 260 / 0.3),
        4px 0 16px oklch(50% 0.1 280 / 0.25);
    }
  }
  
  @keyframes drawerExcited {
    0%, 100% { 
      filter: hue-rotate(0deg) saturate(1);
    }
    25% { 
      filter: hue-rotate(10deg) saturate(1.1);
    }
    50% { 
      filter: hue-rotate(-10deg) saturate(1.2);
    }
    75% { 
      filter: hue-rotate(5deg) saturate(1.1);
    }
  }
  
  @keyframes drawerActive {
    0%, 100% { 
      box-shadow: 
        0 0 20px oklch(85% 0.2 200 / 0.6),
        inset -3px 0 0 oklch(98% 0.02 200),
        inset 1px 0 0 oklch(80% 0.1 180 / 0.4),
        6px 0 20px oklch(70% 0.15 200 / 0.3);
    }
    50% { 
      box-shadow: 
        0 0 28px oklch(85% 0.25 180 / 0.7),
        inset -3px 0 0 oklch(98% 0.02 180),
        inset 1px 0 0 oklch(80% 0.1 160 / 0.4),
        8px 0 24px oklch(70% 0.18 180 / 0.35);
    }
  }

  .drawer-title {
    font-size: var(--text-xl);
    color: var(--accent);
    margin-bottom: var(--space-sm);
  }

  .drawer-subtitle {
    font-size: var(--text-sm);
    color: color-mix(in oklch, var(--text) 70%, transparent 30%);
    margin-bottom: var(--space-lg);
    line-height: 1.5;
  }

  .drawer-icon {
    color: oklch(25% 0.1 280);
    font-size: 1.5rem;
    font-weight: 700;
    text-shadow: 
      0 0 8px oklch(75% 0.2 280 / 0.6),
      0 1px 0 oklch(98% 0.02 280);
    transition: all 200ms ease;
    filter: drop-shadow(0 2px 4px oklch(50% 0.1 280 / 0.3));
    transform: scaleY(-1); /* Flip on Y-axis (horizontally) */
  }

  .drawer-toggle[aria-expanded="true"] .drawer-icon {
    transform: scaleY(-1) scale(0.9); /* Keep Y-flip when open */
    color: oklch(25% 0.1 200);
    text-shadow: 
      0 0 12px oklch(75% 0.25 200 / 0.7),
      0 1px 0 oklch(98% 0.02 200);
  }
  
  /* ðŸŽ¯ OBSERVATORY BUTTON SYSTEM - Embedded Opal Aesthetic */
  .url-actions button,
  .add-url-button,
  .url-save,
  .url-cancel,
  .url-test,
  .url-edit,
  .url-remove {
    /* Base opal button design */
    border: none;
    border-radius: 0.5rem;
    padding: 0.5rem 0.75rem;
    cursor: pointer;
    font-size: 0.875rem;
    font-weight: 600;
    
    /* Embedded opal appearance */
    background: 
      linear-gradient(145deg, 
        oklch(96% 0.02 280) 0%, 
        oklch(92% 0.04 260) 50%,
        oklch(88% 0.06 240) 100%
      );
    
    /* Inset shadow for embedded effect */
    box-shadow: 
      inset 0 1px 0 oklch(98% 0.01 280),
      inset 0 -1px 0 oklch(85% 0.08 260 / 0.4),
      0 2px 4px oklch(50% 0.1 280 / 0.15);
    
    color: oklch(35% 0.1 280);
    text-shadow: 0 1px 0 oklch(98% 0.01 280 / 0.8);
    
    transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  
  .url-actions button:hover,
  .add-url-button:hover,
  .url-save:hover,
  .url-cancel:hover,
  .url-test:hover,
  .url-edit:hover,
  .url-remove:hover {
    transform: translateY(-1px);
    box-shadow: 
      inset 0 1px 0 oklch(98% 0.01 280),
      inset 0 -1px 0 oklch(85% 0.08 260 / 0.5),
      0 4px 8px oklch(50% 0.1 280 / 0.2),
      0 0 12px oklch(75% 0.15 280 / 0.3);
  }
  
  .url-actions button:active,
  .add-url-button:active,
  .url-save:active,
  .url-cancel:active,
  .url-test:active,
  .url-edit:active,
  .url-remove:active {
    transform: translateY(0);
    box-shadow: 
      inset 0 2px 4px oklch(75% 0.1 260 / 0.3),
      inset 0 1px 0 oklch(85% 0.05 240 / 0.6);
  }
  
  /* Specific button variants */
  .url-test {
    background: 
      linear-gradient(145deg, 
        oklch(94% 0.05 200) 0%, 
        oklch(90% 0.08 180) 50%,
        oklch(86% 0.10 160) 100%
      );
    color: oklch(30% 0.15 200);
  }
  
  .url-remove {
    background: 
      linear-gradient(145deg, 
        oklch(94% 0.05 25) 0%, 
        oklch(90% 0.08 15) 50%,
        oklch(86% 0.10 5) 100%
      );
    color: oklch(30% 0.15 15);
  }
  
  .add-url-button {
    /* Observatory Portal Button - Cosmic Gateway Aesthetic */
    background: 
      linear-gradient(145deg, 
        oklch(85% 0.15 200) 0%, 
        oklch(90% 0.12 220) 50%,
        oklch(88% 0.18 240) 100%
      );
    color: oklch(20% 0.05 280); /* Dark cosmic text for high contrast */
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    
    /* Cosmic portal glow */
    box-shadow: 
      inset 0 1px 0 oklch(95% 0.08 200),
      inset 0 -1px 0 oklch(80% 0.2 240 / 0.4),
      0 2px 8px oklch(50% 0.15 220 / 0.2),
      0 0 16px oklch(75% 0.12 200 / 0.3);
  }
  
  .add-url-button:hover {
    background: 
      linear-gradient(145deg, 
        oklch(88% 0.18 200) 0%, 
        oklch(92% 0.15 220) 50%,
        oklch(90% 0.20 240) 100%
      );
    box-shadow: 
      inset 0 1px 0 oklch(98% 0.05 200),
      inset 0 -1px 0 oklch(82% 0.22 240 / 0.5),
      0 4px 12px oklch(50% 0.15 220 / 0.3),
      0 0 20px oklch(75% 0.15 200 / 0.4);
  }

  /* URL management styles */
  .url-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .url-item {
    padding: var(--space-md);
    background: var(--surface-hover);
    border-radius: var(--space-xs);
    border: 1px solid var(--accent-dim);
  }

  .url-input {
    width: 100%;
    background: transparent;
    border: 1px solid color-mix(in oklch, var(--accent) 30%, transparent 70%);
    border-radius: var(--space-xs);
    padding: var(--space-sm);
    color: var(--text);
    font-family: ui-monospace, monospace;
  }

  .url-input:invalid {
    border-color: oklch(65% 0.3 0); /* Red for invalid */
  }

  .url-input:focus {
    outline: 2px solid var(--accent);
    outline-offset: 2px;
  }

  .url-error {
    color: oklch(65% 0.3 0);
    font-size: var(--text-sm);
    margin-top: var(--space-xs);
  }

  .headers-toggle {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    color: var(--accent);
    cursor: pointer;
    margin-top: var(--space-sm);
    font-size: var(--text-sm);
    opacity: 0.8;
    transition: opacity 200ms ease;
  }

  .headers-toggle:hover {
    opacity: 1;
  }
  
  /* ðŸ”§ TOOL DISCOVERY SHOWCASE */
  .tools-section {
    margin-top: 1rem;
    padding: 1rem;
    background: 
      linear-gradient(135deg, 
        oklch(96% 0.02 280 / 0.6) 0%, 
        oklch(94% 0.04 260 / 0.8) 100%
      );
    border-radius: 0.75rem;
    border: 1px solid oklch(85% 0.08 280 / 0.3);
  }
  
  .tools-header {
    margin-bottom: 0.75rem;
  }
  
  .tools-title {
    color: oklch(30% 0.15 280);
    font-weight: 700;
    font-size: 0.875rem;
    text-shadow: 0 1px 0 oklch(98% 0.01 280 / 0.8);
  }
  
  .tools-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .tool-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    background: 
      linear-gradient(135deg, 
        oklch(98% 0.01 280) 0%, 
        oklch(94% 0.03 260) 100%
      );
    border: 1px solid oklch(88% 0.06 280 / 0.4);
    border-radius: 1rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: oklch(25% 0.12 280);
    text-shadow: 0 1px 0 oklch(99% 0.01 280);
    
    box-shadow: 
      inset 0 1px 0 oklch(99% 0.01 280),
      0 1px 2px oklch(75% 0.1 280 / 0.2);
  }
  
  /* ðŸŒŸ CONNECTION STATUS THEATER */
  .status-indicator {
    font-size: 1rem;
    margin-right: 0.5rem;
    filter: drop-shadow(0 0 4px currentColor);
  }
  
  .tools-indicator {
    background: 
      radial-gradient(ellipse at 30% 30%, oklch(85% 0.15 65) 0%, oklch(80% 0.18 45) 100%);
    color: white;
    padding: 0.125rem 0.5rem;
    border-radius: 0.75rem;
    font-size: 0.625rem;
    font-weight: 700;
    text-shadow: 0 1px 2px oklch(60% 0.2 45 / 0.8);
    box-shadow: 
      0 2px 4px oklch(70% 0.15 45 / 0.4),
      inset 0 1px 0 oklch(90% 0.1 65 / 0.6);
    margin-left: 0.5rem;
  }
  
  /* Testing animation */
  .url-test[disabled] {
    background: 
      linear-gradient(145deg, 
        oklch(92% 0.02 280) 0%, 
        oklch(88% 0.04 260) 50%,
        oklch(84% 0.06 240) 100%
      );
    color: oklch(50% 0.08 280);
    cursor: not-allowed;
    animation: testingPulse 1.5s ease-in-out infinite;
  }
  
  @keyframes testingPulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
  }

  .headers-section {
    margin-top: var(--space-md);
    padding: var(--space-md);
    background: color-mix(in oklch, var(--accent) 5%, transparent 95%);
    border-radius: var(--space-xs);
    display: none;
  }

  .headers-section.expanded {
    display: block;
  }

  /* Buttons */
  .add-url-btn,
  .remove-url-btn {
    padding: var(--space-sm) var(--space-md);
    background: var(--primary);
    color: var(--bg);
    border: none;
    border-radius: var(--space-xs);
    cursor: pointer;
    font-weight: 500;
    transition: all 200ms ease;
  }

  .add-url-btn:hover,
  .remove-url-btn:hover {
    background: oklch(from var(--primary) calc(l * 1.1) c h);
    transform: translateY(-1px);
  }

  .remove-url-btn {
    background: oklch(65% 0.3 0); /* Red */
  }

  .remove-url-btn:hover {
    background: oklch(70% 0.3 0);
  }
}